function:
  name: ${self:service}-diff-pipeline-milestone${self:service}
  handler: ${self:custom.alias}/src/datapipeline_milestone_diff.handler
  events:
    - sns: 
        arn: ${ssm:/omni/${self:provider.stage}/eventing/sns/diff-data-pipeline/milestone/arn}
  package:
    exclude:
    - '**/*'
    include:
    - ${self:custom.alias}/src/datapipeline_milestone_diff.py

  environment:
    DBNAME: ${ssm:/omni-dw/${self:provider.stage}/db/name}
    USER: ${ssm:/omni-dw/${self:provider.stage}/db/user~true}
    CLUSTERID: ${ssm:/omni-dw/${self:provider.stage}/cluster/identifier}
    BUCKET: ${ssm:/omni-dw/${self:provider.stage}/s3/datapipeline/bucket}
    KEY: ${ssm:/omni-dw/${self:provider.stage}/s3/eventing-milestone-diff/key}
